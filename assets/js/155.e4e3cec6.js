(window.webpackJsonp=window.webpackJsonp||[]).push([[155],{563:function(s,a,t){"use strict";t.r(a);var n=t(2),e=Object(n.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("p",[s._v("Maven是当前流行的项目管理工具，但官方的库在国内经常连不上，连上以后龟一般的速度也能让你崩溃，这时候也许你会去搜索下如何加速。\n百度搜索 maven镜像 会发现绝大部分都在推荐 阿里云 的镜像服务，但是阿里云的镜像服务真的好用吗？去国内各大云厂商搜索了下发现都提供了镜像服务，到底哪个是最快的呢？这里进行深度测试。各大厂商也是鸡贼，对关键字也做了处理比如腾讯的 腾讯云镜像maven 腾讯云maven镜像")]),s._v(" "),a("p",[s._v("镜像地址")]),s._v(" "),a("ul",[a("li",[s._v("阿里云 https://maven.aliyun.com/mvn/view")]),s._v(" "),a("li",[s._v("腾讯云 https://mirrors.cloud.tencent.com/")]),s._v(" "),a("li",[s._v("华为云 https://mirrors.huaweicloud.com/")])]),s._v(" "),a("p",[s._v("下载速度\n配置文件准备\n示例程序使用之前多数据源配置的程序样例，文末有下载方式")]),s._v(" "),a("p",[s._v("我们使用华为云maven镜像加速下载下来的配置文件为模板，复制三份，mirror分别指定为华为云、阿里云、腾讯云的地址，文件命名为 settings_ali.xml settings_huawei.xml settings_tencent.xml")]),s._v(" "),a("p",[s._v("maven本地缓存路径使用默认的地址 ${user.home}/.m2/repository ,每次构建之前需要清理本地缓存文件")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /root/.m2/repository/*\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("我们使用maven命令行窗口指定特定settings.xml的方式进行测试\nmaven命令如下")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("mvn clean package "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Dmaven.test.skip")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" settings_ali.xml\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("完整的脚本\n这里以华为云为例，脚本执行100次")]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token shebang important"}},[s._v("#!/bin/bash")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("''")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">")]),s._v(" huawei\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("((")]),s._v("i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i"),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("<=")]),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("100")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" i "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("++")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("))")])]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("do")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("echo")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token variable"}},[s._v("$i")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("rm")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-rf")]),s._v(" /root/.m2/repository/*\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# start_mill=$((`date '+%s'`*1000+`date '+%N'`/1000000))")]),s._v("\n    mvn clean package "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-Dmaven.test.skip")]),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("true "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-s")]),s._v(" settings_huawei.xml "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v(">>")]),s._v(" huawei\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# end_mill=$((`date '+%s'`*1000+`date '+%N'`/1000000))")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# diff=$[10#$end_mill-10#$start_mill]")]),s._v("\n    "),a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#echo $diff >> huawei")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("done")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Total time'")]),s._v(" huawei "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN {max = 0} {if ($4>max) max=$4 fi} END {print \"Max=\", max}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Total time'")]),s._v(" huawei "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'BEGIN {min = 6553565} {if ($4<min) min=$4 fi} END {print \"Min=\", min}'")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("grep")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'Total time'")]),s._v(" huawei "),a("span",{pre:!0,attrs:{class:"token operator"}},[s._v("|")]),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("awk")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[s._v("'{sum+=$4}END{print \"Average = \", sum/NR}'")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br"),a("span",{staticClass:"line-number"},[s._v("3")]),a("br"),a("span",{staticClass:"line-number"},[s._v("4")]),a("br"),a("span",{staticClass:"line-number"},[s._v("5")]),a("br"),a("span",{staticClass:"line-number"},[s._v("6")]),a("br"),a("span",{staticClass:"line-number"},[s._v("7")]),a("br"),a("span",{staticClass:"line-number"},[s._v("8")]),a("br"),a("span",{staticClass:"line-number"},[s._v("9")]),a("br"),a("span",{staticClass:"line-number"},[s._v("10")]),a("br"),a("span",{staticClass:"line-number"},[s._v("11")]),a("br"),a("span",{staticClass:"line-number"},[s._v("12")]),a("br"),a("span",{staticClass:"line-number"},[s._v("13")]),a("br"),a("span",{staticClass:"line-number"},[s._v("14")]),a("br"),a("span",{staticClass:"line-number"},[s._v("15")]),a("br")])]),a("p",[s._v("使用到了awk进行统计")]),s._v(" "),a("p",[s._v("结论\n用户体验： 华为云>腾讯云>阿里云\n下载速度： 华为云>阿里云>腾讯云")]),s._v(" "),a("p",[s._v("用户体验无所谓了一次性配置，我们肯定首选下载速度最快的华为云了。")]),s._v(" "),a("p",[s._v("小技巧：使用nohup让脚本后台运行，nohup sh mvn-tencent.sh &")])])}),[],!1,null,null,null);a.default=e.exports}}]);