(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{421:function(s,a,e){"use strict";e.r(a);var t=e(2),r=Object(t.a)({},(function(){var s=this,a=s._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[a("h2",{attrs:{id:"网络通信协议分层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络通信协议分层"}},[s._v("#")]),s._v(" 网络通信协议分层")]),s._v(" "),a("h3",{attrs:{id:"应用层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#应用层"}},[s._v("#")]),s._v(" 应用层：")]),s._v(" "),a("ul",[a("li",[s._v("HTTP（Hypertext Transfer Protocol 超文本传输协议，显示网页）")]),s._v(" "),a("li",[s._v("DNS（Domain Name System）")]),s._v(" "),a("li",[s._v("FTP（File Transfer Protocol）")]),s._v(" "),a("li",[s._v("SFTP（SSH File Transfer Protocol，和FTP不一样）")]),s._v(" "),a("li",[s._v("SCP（Secure copy，based on SSH）")]),s._v(" "),a("li",[s._v("SSH （Secure Shell）")])]),s._v(" "),a("h3",{attrs:{id:"通信层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#通信层"}},[s._v("#")]),s._v(" 通信层：")]),s._v(" "),a("ul",[a("li",[s._v("TCP（Transmission Control Protocol 三次握手传输协议）")]),s._v(" "),a("li",[s._v("UDP")])]),s._v(" "),a("h3",{attrs:{id:"网络层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#网络层"}},[s._v("#")]),s._v(" 网络层：")]),s._v(" "),a("ul",[a("li",[s._v("IP（Internet Protocol）")]),s._v(" "),a("li",[s._v("ICMP（Internet Control Message Protocol，主要用于路由发送错误报告）")])]),s._v(" "),a("h3",{attrs:{id:"链接层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#链接层"}},[s._v("#")]),s._v(" 链接层：")]),s._v(" "),a("ul",[a("li",[s._v("MAC（media access control）")])]),s._v(" "),a("h2",{attrs:{id:"文件传输协议"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#文件传输协议"}},[s._v("#")]),s._v(" 文件传输协议")]),s._v(" "),a("h3",{attrs:{id:"ftp-file-transfer-protocol"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#ftp-file-transfer-protocol"}},[s._v("#")]),s._v(" FTP（File Transfer Protocol）")]),s._v(" "),a("p",[s._v("TCP/IP网络上两台计算机传送文件的协议，FTP是在TCP/IP网络和INTERNET上最早使用的协议之一，它属于网络协议组的应用层。FTP客户机可以给服务器发出命令来下载文件，上载文件，创建或改变服务器上的目录。相比于HTTP，FTP协议要复杂得多。复杂的原因，是因为FTP协议要用到两个TCP连接，一个是命令链路，用来在FTP客户端与服务器之间传递命令；另一个是数据链路，用来上传或下载数据。FTP是基于TCP协议的，因此iptables防火墙设置中只需要放开指定端口（21 + PASV端口范围）的TCP协议即可。\nFTP工作模式：\nPORT（主动）方式的连接过程是：客户端向服务器的FTP端口（默认是21）发送连接请求，服务器接受连接，建立一条命令链路。当需要传送数据时，客户端在命令链路上用PORT命令告诉服务器：“我打开了一个1024+的随机端口，你过来连接我”。于是服务器从20端口向客户端的1024+随机端口发送连接请求，建立一条数据链路来传送数据。\nPASV（Passive被动）方式的连接过程是：客户端向服务器的FTP端口（默认是21）发送连接请求，服务器接受连接，建立一条命令链路。当需要传送数据时，服务器在命令链路上用PASV命令告诉客户端：“我打开了一个1024+的随机端口，你过来连接我”。于是客户端向服务器的指定端口发送连接请求，建立一条数据链路来传送数据。\nPORT方式，服务器会主动连接客户端的指定端口，那么如果客户端通过代理服务器链接到internet上的网络的话，服务器端可能会连接不到客户端本机指定的端口，或者被客户端、代理服务器防火墙阻塞了连接，导致连接失败。PASV方式，服务器端防火墙除了要放开21端口外，还要放开PASV配置指定的端口范围。")]),s._v(" "),a("h3",{attrs:{id:"sftp-secure-file-transfer-protocol"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#sftp-secure-file-transfer-protocol"}},[s._v("#")]),s._v(" SFTP（Secure File Transfer Protocol）")]),s._v(" "),a("p",[s._v("安全文件传送协议。可以为传输文件提供一种安全的加密方法。SFTP与 FTP有着几乎一样的语法和功能。SFTP为SSH的一部份，是一种传输文件到服务器的安全方式。在SSH软件包中，已经包含了一个叫作SFTP(Secure File Transfer Protocol)的安全文件传输子系统，SFTP本身没有单独的守护进程，它必须使用sshd守护进程（端口号默认是22）来完成相应的连接操作，所以从某种意义上来说，SFTP并不像一个服务器程序，而更像是一个客户端程序。SFTP同样是使用加密传输认证信息和传输的数据，所以，使用SFTP是非常安全的。但是，由于这种传输方式使用了加密/解密技术，所以传输效率比普通的FTP要低得多，如果您对网络安全性要求更高时，可以使用SFTP代替FTP")]),s._v(" "),a("ul",[a("li",[s._v("连接到远程服务器")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#scp 命令使用端口号 22 默认 22 可省略")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("sftp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("22")]),s._v(" ubuntu@192.168.2.72\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("当前服务器路径")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("pwd")]),s._v("\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("当前本地路径")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("lpwd\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("下载文件到本地")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("get filename\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("ul",[a("li",[s._v("下载文件到本地")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[s._v("put filename\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br")])]),a("p",[s._v("具体参考"),a("a",{attrs:{href:"https://docs.oracle.com/cd/E37934_01/html/E36614/remotehowtoaccess-14.html",target:"_blank",rel:"noopener noreferrer"}},[s._v("登录到远程系统以复制文件 (sftp)"),a("OutboundLink")],1)]),s._v(" "),a("h3",{attrs:{id:"scp-secure-copy"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#scp-secure-copy"}},[s._v("#")]),s._v(" SCP（Secure Copy）")]),s._v(" "),a("p",[s._v("SCP就是Secure copy，是用来进行远程文件复制的，并且整个复制过程是加密的。数据传输使用ssh，并且和使用和ssh相同的认证方式，提供相同的安全保证。")]),s._v(" "),a("ul",[a("li",[s._v("文件从本地复制到远程")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#scp 命令使用端口号 4588 默认 22 可省略")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4588")]),s._v(" local_file remote_username@remote_ip:remote_folder\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("文件夹从本地复制到远程")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#scp 命令使用端口号 4588 默认 22 可省略")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4588")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" local_folder remote_username@remote_ip:remote_folder\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("文件从远程复制到本地")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#scp 命令使用端口号 4588 默认 22 可省略")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4588")]),s._v(" remote_username@remote_ip:remote_folder local_file\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("ul",[a("li",[s._v("文件夹从远程复制到本地")])]),s._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#scp 命令使用端口号 4588 默认 22 可省略")]),s._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[s._v("scp")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-P")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[s._v("4588")]),s._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[s._v("-r")]),s._v(" remote_username@remote_ip:remote_folder local_folder\n")])]),s._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[s._v("1")]),a("br"),a("span",{staticClass:"line-number"},[s._v("2")]),a("br")])]),a("p",[s._v("具体参考"),a("a",{attrs:{href:"https://docs.oracle.com/cd/E37934_01/html/E36614/remotehowtoaccess-55154.html#remotehowtoaccess-46771",target:"_blank",rel:"noopener noreferrer"}},[s._v("如何在两个系统之间复制文件 (scp)"),a("OutboundLink")],1)]),s._v(" "),a("h2",{attrs:{id:"比较"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#比较"}},[s._v("#")]),s._v(" 比较：")]),s._v(" "),a("ul",[a("li",[s._v("FTP 基于TCP来传输文件，明文传输用户信息和数据。")]),s._v(" "),a("li",[s._v("SFTP 基于SSH来加密传输文件，可靠性高，可断点续传。")]),s._v(" "),a("li",[s._v("SCP 是基于SSH来加密拷贝文件，但要知道详细目录，不可断点续传。")])])])}),[],!1,null,null,null);a.default=r.exports}}]);