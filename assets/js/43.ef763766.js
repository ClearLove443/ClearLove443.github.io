(window.webpackJsonp=window.webpackJsonp||[]).push([[43],{443:function(t,a,e){"use strict";e.r(a);var s=e(2),n=Object(s.a)({},(function(){var t=this,a=t._self._c;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"场景一-镜像下载、运行及删除"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#场景一-镜像下载、运行及删除"}},[t._v("#")]),t._v(" 场景一：镜像下载、运行及删除")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",{staticStyle:{"text-align":"left"}},[t._v("COMMAND")]),t._v(" "),a("th",{staticStyle:{"text-align":"left"}},[t._v("DESC")])])]),t._v(" "),a("tbody",[a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("查看")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker images")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("列出所有镜像(images)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker ps")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("列出正在运行的容器(containers)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker ps -a")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("列出所有的容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker pull centos")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("下载centos镜像")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker top ‘container’")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("查看容器内部运行程序")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("镜像")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker rmi [image-id]")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("删除镜像")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker rmi $(docker images -q)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("删除所有镜像")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v('docker rmi $(sudo docker images --filter "dangling=true" -q --no-trunc)')]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("删除无用镜像")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker build -t wp-api .")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("构建1个镜像,-t(镜像的名字及标签) wp-api(镜像名) .(构建的目录)")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker run -i -t wp-api")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("-t -i以交互伪终端模式运行,可以查看输出信息")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker run -d -p 80:80 wp-api")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("镜像端口 -d后台模式运行镜像")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("ocker run --help")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("帮助")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("容器")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}})]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker kill ‘container’")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("停止正在运行的容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker rm ‘container’")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("删除没有运行的容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker exec -it 容器ID sh")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("进入容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker stop ‘container’")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("停止一个正在运行的容器，‘container’可以是容器ID或名称")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker start ‘container’")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("启动一个已经停止的容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker restart ‘container’")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("重启容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker run -i -t -p :80 LAMP /bin/bash")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("运行容器并做http端口转发")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker exec -it ‘container’ /bin/bash")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("进入ubuntu类容器的bash")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker exec -it /bin/sh")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("进入alpine类容器的sh")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker rm docker ps -a -q")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("删除所有已经停止的容器")])]),t._v(" "),a("tr",[a("td",{staticStyle:{"text-align":"left"}},[t._v("docker kill $(docker ps -a -q)")]),t._v(" "),a("td",{staticStyle:{"text-align":"left"}},[t._v("杀死所有正在运行的容器，$()功能同``")])])])]),t._v(" "),a("p",[t._v("更多命令查看"),a("a",{attrs:{href:"https://www.runoob.com/docker/docker-command-manual.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Docker 命令大全 | 菜鸟教程"),a("OutboundLink")],1)]),t._v(" "),a("h1",{attrs:{id:"场景二-下载镜像并直接运行"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#场景二-下载镜像并直接运行"}},[t._v("#")]),t._v(" 场景二：下载镜像并直接运行")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run  "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" ubuntu "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" ubuntu "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cp")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("dd")]),t._v(" ubuntu:tmp/ "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#复制文件dd 到容器的/tmp 目录")]),t._v("\nCtrl-p Ctrl-q  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#退出")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br")])]),a("h1",{attrs:{id:"修改镜像-并保存到私有仓库"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改镜像-并保存到私有仓库"}},[t._v("#")]),t._v(" 修改镜像，并保存到私有仓库")]),t._v(" "),a("div",{staticClass:"language-bash line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-bash"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exec")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-it")]),t._v(" ubuntu "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("bash")]),t._v(" \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" update\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("apt-get")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("install")]),t._v(" apache2\nCtrl-p Ctrl-q  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#退出")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" commit "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-a")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"mir355"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v('"ubuntu add apache2"')]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("ID"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("  private/ubuntu_apache:v1   "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#保存镜像")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" stop ubuntu \n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("rm")]),t._v(" ubuntu\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" run "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-i")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-t")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("--name")]),t._v(" apache2 "),a("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-p")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("8080")]),t._v(":80 private/ubuntu_apache:v1 /bin/bash\n/etc/init.d/apache2 start\nCtrl-p Ctrl-q  "),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#退出")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#通过 docker tag重命名镜像，使之与registry匹配")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" tag private/ubuntu_apache:v1 "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:5000/private/ubuntu_apache:v1\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#保存到私有仓库")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" push "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:5000/private/ubuntu_apache:v1\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("curl")]),t._v(" http://127.0.0.1:5000/v2/_catalog\n\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#下载镜像")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("docker")]),t._v(" pull "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("127.0")]),t._v(".0.1:5000/private/ubuntu_apache:v1\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);